{"ast":null,"code":"/**\r\n* PHP Email Form Validation - v2.3\r\n* URL: https://bootstrapmade.com/php-email-form/\r\n* Author: BootstrapMade.com\r\n*/\n!function ($) {\n  \"use strict\";\n\n  $('form.php-email-form').submit(function (e) {\n    e.preventDefault();\n    var f = $(this).find('.form-group'),\n        ferror = false,\n        emailExp = /^[^\\s()<>@,;:\\/]+@\\w[\\w\\.-]+\\.[a-z]{2,}$/i;\n    f.children('input').each(function () {\n      // run all inputs\n      var i = $(this); // current input\n\n      var rule = i.attr('data-rule');\n\n      if (rule !== undefined) {\n        var ierror = false; // error flag for current input\n\n        var pos = rule.indexOf(':', 0);\n\n        if (pos >= 0) {\n          var exp = rule.substr(pos + 1, rule.length);\n          rule = rule.substr(0, pos);\n        } else {\n          rule = rule.substr(pos + 1, rule.length);\n        }\n\n        switch (rule) {\n          case 'required':\n            if (i.val() === '') {\n              ferror = ierror = true;\n            }\n\n            break;\n\n          case 'minlen':\n            if (i.val().length < parseInt(exp)) {\n              ferror = ierror = true;\n            }\n\n            break;\n\n          case 'email':\n            if (!emailExp.test(i.val())) {\n              ferror = ierror = true;\n            }\n\n            break;\n\n          case 'checked':\n            if (!i.is(':checked')) {\n              ferror = ierror = true;\n            }\n\n            break;\n\n          case 'regexp':\n            exp = new RegExp(exp);\n\n            if (!exp.test(i.val())) {\n              ferror = ierror = true;\n            }\n\n            break;\n        }\n\n        i.next('.validate').html(ierror ? i.attr('data-msg') !== undefined ? i.attr('data-msg') : 'wrong Input' : '').show('blind');\n      }\n    });\n    f.children('textarea').each(function () {\n      // run all inputs\n      var i = $(this); // current input\n\n      var rule = i.attr('data-rule');\n\n      if (rule !== undefined) {\n        var ierror = false; // error flag for current input\n\n        var pos = rule.indexOf(':', 0);\n\n        if (pos >= 0) {\n          var exp = rule.substr(pos + 1, rule.length);\n          rule = rule.substr(0, pos);\n        } else {\n          rule = rule.substr(pos + 1, rule.length);\n        }\n\n        switch (rule) {\n          case 'required':\n            if (i.val() === '') {\n              ferror = ierror = true;\n            }\n\n            break;\n\n          case 'minlen':\n            if (i.val().length < parseInt(exp)) {\n              ferror = ierror = true;\n            }\n\n            break;\n        }\n\n        i.next('.validate').html(ierror ? i.attr('data-msg') != undefined ? i.attr('data-msg') : 'wrong Input' : '').show('blind');\n      }\n    });\n    if (ferror) return false;\n    var this_form = $(this);\n    var action = $(this).attr('action');\n\n    if (!action) {\n      this_form.find('.loading').slideUp();\n      this_form.find('.error-message').slideDown().html('The form action property is not set!');\n      return false;\n    }\n\n    this_form.find('.sent-message').slideUp();\n    this_form.find('.error-message').slideUp();\n    this_form.find('.loading').slideDown();\n\n    if ($(this).data('recaptcha-site-key')) {\n      var recaptcha_site_key = $(this).data('recaptcha-site-key');\n      grecaptcha.ready(function () {\n        grecaptcha.execute(recaptcha_site_key, {\n          action: 'php_email_form_submit'\n        }).then(function (token) {\n          php_email_form_submit(this_form, action, this_form.serialize() + '&recaptcha-response=' + token);\n        });\n      });\n    } else {\n      php_email_form_submit(this_form, action, this_form.serialize());\n    }\n\n    return true;\n  });\n\n  function php_email_form_submit(this_form, action, data) {\n    $.ajax({\n      type: \"POST\",\n      url: action,\n      data: data,\n      timeout: 40000\n    }).done(function (msg) {\n      if (msg.trim() == 'OK') {\n        this_form.find('.loading').slideUp();\n        this_form.find('.sent-message').slideDown();\n        this_form.find(\"input:not(input[type=submit]), textarea\").val('');\n      } else {\n        this_form.find('.loading').slideUp();\n\n        if (!msg) {\n          msg = 'Form submission failed and no error message returned from: ' + action + '<br>';\n        }\n\n        this_form.find('.error-message').slideDown().html(msg);\n      }\n    }).fail(function (data) {\n      console.log(data);\n      var error_msg = \"Form submission failed!<br>\";\n\n      if (data.statusText || data.status) {\n        error_msg += 'Status:';\n\n        if (data.statusText) {\n          error_msg += ' ' + data.statusText;\n        }\n\n        if (data.status) {\n          error_msg += ' ' + data.status;\n        }\n\n        error_msg += '<br>';\n      }\n\n      if (data.responseText) {\n        error_msg += data.responseText;\n      }\n\n      this_form.find('.loading').slideUp();\n      this_form.find('.error-message').slideDown().html(error_msg);\n    });\n  }\n}(jQuery);","map":{"version":3,"sources":["/home/franklin/server/app/javascript/packs/js/validate.js"],"names":["$","submit","e","preventDefault","f","find","ferror","emailExp","children","each","i","rule","attr","undefined","ierror","pos","indexOf","exp","substr","length","val","parseInt","test","is","RegExp","next","html","show","this_form","action","slideUp","slideDown","data","recaptcha_site_key","grecaptcha","ready","execute","then","token","php_email_form_submit","serialize","ajax","type","url","timeout","done","msg","trim","fail","console","log","error_msg","statusText","status","responseText","jQuery"],"mappings":"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","sourcesContent":["/**\r\n* PHP Email Form Validation - v2.3\r\n* URL: https://bootstrapmade.com/php-email-form/\r\n* Author: BootstrapMade.com\r\n*/\r\n!(function($) {\r\n  \"use strict\";\r\n\r\n  $('form.php-email-form').submit(function(e) {\r\n    e.preventDefault();\r\n    \r\n    var f = $(this).find('.form-group'),\r\n      ferror = false,\r\n      emailExp = /^[^\\s()<>@,;:\\/]+@\\w[\\w\\.-]+\\.[a-z]{2,}$/i;\r\n\r\n    f.children('input').each(function() { // run all inputs\r\n     \r\n      var i = $(this); // current input\r\n      var rule = i.attr('data-rule');\r\n\r\n      if (rule !== undefined) {\r\n        var ierror = false; // error flag for current input\r\n        var pos = rule.indexOf(':', 0);\r\n        if (pos >= 0) {\r\n          var exp = rule.substr(pos + 1, rule.length);\r\n          rule = rule.substr(0, pos);\r\n        } else {\r\n          rule = rule.substr(pos + 1, rule.length);\r\n        }\r\n\r\n        switch (rule) {\r\n          case 'required':\r\n            if (i.val() === '') {\r\n              ferror = ierror = true;\r\n            }\r\n            break;\r\n\r\n          case 'minlen':\r\n            if (i.val().length < parseInt(exp)) {\r\n              ferror = ierror = true;\r\n            }\r\n            break;\r\n\r\n          case 'email':\r\n            if (!emailExp.test(i.val())) {\r\n              ferror = ierror = true;\r\n            }\r\n            break;\r\n\r\n          case 'checked':\r\n            if (! i.is(':checked')) {\r\n              ferror = ierror = true;\r\n            }\r\n            break;\r\n\r\n          case 'regexp':\r\n            exp = new RegExp(exp);\r\n            if (!exp.test(i.val())) {\r\n              ferror = ierror = true;\r\n            }\r\n            break;\r\n        }\r\n        i.next('.validate').html((ierror ? (i.attr('data-msg') !== undefined ? i.attr('data-msg') : 'wrong Input') : '')).show('blind');\r\n      }\r\n    });\r\n    f.children('textarea').each(function() { // run all inputs\r\n\r\n      var i = $(this); // current input\r\n      var rule = i.attr('data-rule');\r\n\r\n      if (rule !== undefined) {\r\n        var ierror = false; // error flag for current input\r\n        var pos = rule.indexOf(':', 0);\r\n        if (pos >= 0) {\r\n          var exp = rule.substr(pos + 1, rule.length);\r\n          rule = rule.substr(0, pos);\r\n        } else {\r\n          rule = rule.substr(pos + 1, rule.length);\r\n        }\r\n\r\n        switch (rule) {\r\n          case 'required':\r\n            if (i.val() === '') {\r\n              ferror = ierror = true;\r\n            }\r\n            break;\r\n\r\n          case 'minlen':\r\n            if (i.val().length < parseInt(exp)) {\r\n              ferror = ierror = true;\r\n            }\r\n            break;\r\n        }\r\n        i.next('.validate').html((ierror ? (i.attr('data-msg') != undefined ? i.attr('data-msg') : 'wrong Input') : '')).show('blind');\r\n      }\r\n    });\r\n    if (ferror) return false;\r\n\r\n    var this_form = $(this);\r\n    var action = $(this).attr('action');\r\n\r\n    if( ! action ) {\r\n      this_form.find('.loading').slideUp();\r\n      this_form.find('.error-message').slideDown().html('The form action property is not set!');\r\n      return false;\r\n    }\r\n    \r\n    this_form.find('.sent-message').slideUp();\r\n    this_form.find('.error-message').slideUp();\r\n    this_form.find('.loading').slideDown();\r\n\r\n    if ( $(this).data('recaptcha-site-key') ) {\r\n      var recaptcha_site_key = $(this).data('recaptcha-site-key');\r\n      grecaptcha.ready(function() {\r\n        grecaptcha.execute(recaptcha_site_key, {action: 'php_email_form_submit'}).then(function(token) {\r\n          php_email_form_submit(this_form,action,this_form.serialize() + '&recaptcha-response=' + token);\r\n        });\r\n      });\r\n    } else {\r\n      php_email_form_submit(this_form,action,this_form.serialize());\r\n    }\r\n    \r\n    return true;\r\n  });\r\n\r\n  function php_email_form_submit(this_form, action, data) {\r\n    $.ajax({\r\n      type: \"POST\",\r\n      url: action,\r\n      data: data,\r\n      timeout: 40000\r\n    }).done( function(msg){\r\n      if (msg.trim() == 'OK') {\r\n        this_form.find('.loading').slideUp();\r\n        this_form.find('.sent-message').slideDown();\r\n        this_form.find(\"input:not(input[type=submit]), textarea\").val('');\r\n      } else {\r\n        this_form.find('.loading').slideUp();\r\n        if(!msg) {\r\n          msg = 'Form submission failed and no error message returned from: ' + action + '<br>';\r\n        }\r\n        this_form.find('.error-message').slideDown().html(msg);\r\n      }\r\n    }).fail( function(data){\r\n      console.log(data);\r\n      var error_msg = \"Form submission failed!<br>\";\r\n      if(data.statusText || data.status) {\r\n        error_msg += 'Status:';\r\n        if(data.statusText) {\r\n          error_msg += ' ' + data.statusText;\r\n        }\r\n        if(data.status) {\r\n          error_msg += ' ' + data.status;\r\n        }\r\n        error_msg += '<br>';\r\n      }\r\n      if(data.responseText) {\r\n        error_msg += data.responseText;\r\n      }\r\n      this_form.find('.loading').slideUp();\r\n      this_form.find('.error-message').slideDown().html(error_msg);\r\n    });\r\n  }\r\n\r\n})(jQuery);\r\n"]},"metadata":{},"sourceType":"module"}